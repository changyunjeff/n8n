# 第三章：如何创建我的第一个工作流？

## 问题引入

你已经成功安装并配置了N8N，熟悉了用户界面。现在，你可能迫不及待地想要创建你的第一个自动化工作流，让N8N真正为你工作。但是，面对空白的画布，你可能会有很多疑问：我应该从哪里开始？如何添加节点？如何连接它们？如何让工作流真正运行起来？

这些疑问都是正常的。创建第一个工作流就像学习骑自行车一样，一开始可能会觉得困难，但一旦掌握了基本方法，你就会发现它其实很简单，而且非常有趣。本章将手把手地教你如何从零开始创建你的第一个工作流。我们将从一个简单的"Hello World"工作流开始，逐步学习如何添加节点、配置参数、连接节点，以及如何测试和执行工作流。

通过本章的学习，你将能够创建包含多个节点的完整工作流，理解数据如何在节点间流动，并能够阅读和调试执行日志。这将为你后续学习更复杂的工作流打下坚实的基础。

## 核心概念

### 工作流的基本结构

理解工作流的基本结构是创建任何工作流的基础。一个完整的工作流通常包含三个主要部分：

#### 1. 触发器（Trigger）

触发器是工作流的起点，它决定了工作流何时启动。触发器节点通常位于工作流的最左侧。

**常见的触发器类型**：
- **Schedule Trigger**：定时触发器，按时间计划执行（如每天9点、每周一）
- **Webhook Trigger**：Webhook触发器，接收外部HTTP请求
- **Email Trigger**：邮件触发器，收到新邮件时触发
- **Manual Trigger**：手动触发器，手动点击执行

**触发器的作用**：
- 启动工作流
- 提供初始数据
- 决定工作流的执行时机

#### 2. 处理节点（Processing Nodes）

处理节点是工作流的核心，它们执行实际的工作：获取数据、转换数据、执行操作等。

**常见的处理节点类型**：
- **HTTP Request**：发送HTTP请求，调用API
- **Set**：设置或修改数据字段
- **Code**：执行JavaScript代码
- **IF**：条件判断，根据条件分流
- **Function**：执行自定义函数

**处理节点的特点**：
- 接收上游节点的数据
- 对数据进行处理
- 将处理后的数据传递给下游节点

#### 3. 输出节点（Output Nodes）

输出节点是工作流的终点，它们将结果输出到外部系统或保存数据。

**常见的输出节点类型**：
- **Email**：发送邮件
- **Slack**：发送Slack消息
- **Google Sheets**：写入Google表格
- **Webhook Response**：返回HTTP响应
- **Save to File**：保存到文件

**工作流结构示意图**：
```
[触发器] → [处理节点1] → [处理节点2] → ... → [输出节点]
```

### 节点的添加和连接

#### 添加节点

在N8N中，添加节点非常简单：

1. **点击画布上的"+"按钮**或**双击画布空白处**
2. **搜索节点**：在搜索框中输入节点名称（如"Schedule"、"HTTP Request"）
3. **选择节点**：从搜索结果中选择需要的节点
4. **节点出现在画布上**：节点会自动添加到画布上

[截图位置：添加节点的界面]

#### 连接节点

节点之间的连接定义了数据的流向：

1. **从源节点拖拽**：将鼠标放在源节点的右侧连接点上
2. **拖拽到目标节点**：将连接线拖拽到目标节点的左侧连接点
3. **连接完成**：两个节点之间出现连接线

**连接规则**：
- 数据只能从上游节点流向下游节点
- 一个节点可以有多个输出连接（数据分流）
- 一个节点可以有多个输入连接（数据合并）

[截图位置：节点连接的示意图]

#### 配置节点

每个节点都需要配置才能正常工作：

1. **点击节点**：选择要配置的节点
2. **打开配置面板**：右侧会显示节点的配置面板
3. **填写参数**：根据节点类型填写相应的参数
4. **保存配置**：配置会自动保存

**配置示例**：
- **Schedule Trigger**：设置执行时间（如"每天9点"）
- **HTTP Request**：设置URL、方法、请求头等
- **Set**：设置要添加或修改的字段

### 工作流的执行和测试

#### 测试工作流

在正式执行工作流之前，建议先进行测试：

1. **点击"Test workflow"按钮**：在工作流工具栏中
2. **选择测试节点**：可以选择测试整个工作流或单个节点
3. **查看测试结果**：在节点下方显示测试结果
4. **检查数据**：点击节点查看输入和输出数据

**测试的好处**：
- 快速验证节点配置是否正确
- 查看每个节点的输入和输出数据
- 发现配置错误，避免执行失败

#### 执行工作流

测试通过后，可以正式执行工作流：

1. **激活工作流**：点击工作流右上角的开关，激活工作流
2. **手动执行**：点击"Execute Workflow"按钮手动执行
3. **自动执行**：如果使用触发器（如Schedule），工作流会自动执行
4. **查看执行结果**：在"Executions"中查看执行历史

#### 执行日志

执行日志记录了工作流的执行过程：

- **执行状态**：成功（绿色）、失败（红色）、运行中（黄色）
- **执行时间**：开始时间、结束时间、耗时
- **节点状态**：每个节点的执行状态和数据
- **错误信息**：如果失败，显示详细的错误信息

[截图位置：执行日志界面]

## 详细教程

### 步骤1：创建你的第一个工作流

让我们从创建一个简单的工作流开始。

#### 1.1 打开N8N并创建新工作流

1. **登录N8N**：访问 http://localhost:5678 并登录
2. **创建新工作流**：
   - 点击左侧边栏的"Workflows"
   - 点击右上角的"Add workflow"按钮
   - 或点击"New workflow"按钮

[截图位置：创建新工作流的界面]

#### 1.2 命名工作流

1. **点击工作流名称**：默认名称是"Untitled Workflow"
2. **输入新名称**：如"My First Workflow"或"我的第一个工作流"
3. **保存**：名称会自动保存

#### 1.3 添加第一个节点 - Schedule Trigger

1. **双击画布空白处**或**点击"+"按钮**
2. **搜索"Schedule"**：在搜索框中输入"Schedule"
3. **选择"Schedule Trigger"节点**
4. **节点出现在画布上**

[截图位置：添加Schedule Trigger节点]

#### 1.4 配置Schedule Trigger

1. **点击Schedule Trigger节点**
2. **在右侧配置面板中设置**：
   - **Trigger Times**：选择"Every minute"（每分钟执行一次，用于测试）
   - 或选择"Every day at 9:00 AM"（每天9点执行）
3. **配置完成**：配置会自动保存

**配置说明**：
- **Every minute**：每分钟执行一次（适合测试）
- **Every hour**：每小时执行一次
- **Every day at [time]**：每天指定时间执行
- **Cron expression**：使用Cron表达式自定义时间

[截图位置：Schedule Trigger配置面板]

### 步骤2：添加HTTP Request节点获取数据

现在让我们添加一个节点来获取数据。

#### 2.1 添加HTTP Request节点

1. **点击Schedule Trigger节点右侧的连接点**
2. **拖拽连接线**：会出现节点选择菜单
3. **搜索"HTTP Request"**：输入"HTTP Request"
4. **选择"HTTP Request"节点**
5. **节点自动连接**：HTTP Request节点会自动连接到Schedule Trigger

[截图位置：添加HTTP Request节点]

#### 2.2 配置HTTP Request节点

1. **点击HTTP Request节点**
2. **在配置面板中设置**：
   - **Method**：选择"GET"
   - **URL**：输入一个公开API的URL，例如：
     - 天气API：`https://api.openweathermap.org/data/2.5/weather?q=Beijing&appid=YOUR_API_KEY`
     - 或使用免费的测试API：`https://jsonplaceholder.typicode.com/posts/1`
     - 或使用简单的API：`https://api.github.com/zen`（返回随机名言）
3. **保存配置**

**推荐使用的测试API**（无需API密钥）：
- `https://jsonplaceholder.typicode.com/posts/1`：返回示例JSON数据
- `https://api.github.com/zen`：返回随机名言
- `https://httpbin.org/get`：返回请求信息

[截图位置：HTTP Request配置面板]

#### 2.3 测试HTTP Request节点

1. **点击"Test workflow"按钮**（在工作流工具栏中）
2. **选择HTTP Request节点**：点击节点下方的"Test step"
3. **查看结果**：节点下方会显示API返回的数据
4. **检查数据格式**：确认返回的是JSON格式数据

[截图位置：测试结果]

### 步骤3：添加Set节点处理数据

现在让我们添加一个节点来处理和格式化数据。

#### 3.1 添加Set节点

1. **点击HTTP Request节点右侧的连接点**
2. **拖拽并搜索"Set"**
3. **选择"Set"节点**
4. **节点自动连接**

[截图位置：添加Set节点]

#### 3.2 配置Set节点

Set节点用于添加、修改或删除数据字段。

1. **点击Set节点**
2. **在配置面板中设置**：
   - **Keep Only Set Fields**：取消勾选（保留原有字段）
   - **Values to Set**：点击"Add Value"
     - **Name**：输入字段名，如`message`
     - **Value**：输入值或使用表达式
       - 如果使用GitHub API，可以输入：`{{ $json }}`
       - 或输入固定值：`"Hello from N8N!"`
     - 再添加一个字段：
       - **Name**：`timestamp`
       - **Value**：`{{ $now }}`（当前时间）

3. **保存配置**

**表达式说明**：
- `{{ $json }}`：获取上游节点的JSON数据
- `{{ $now }}`：获取当前时间
- `{{ $json.fieldName }}`：获取JSON中的特定字段

[截图位置：Set节点配置面板]

#### 3.3 测试Set节点

1. **点击"Test workflow"按钮**
2. **查看Set节点的输出**：确认数据已正确设置

### 步骤4：添加输出节点

现在让我们添加一个输出节点来展示结果。

#### 4.1 选择输出方式

根据你的需求，可以选择不同的输出方式：

**方式A：使用Webhook Response（推荐用于测试）**
- 简单，无需额外配置
- 适合测试和演示

**方式B：使用Email节点**
- 需要配置邮件服务
- 适合实际应用

**方式C：使用Slack节点**
- 需要配置Slack
- 适合团队通知

#### 4.2 添加Webhook Response节点（方式A）

1. **点击Set节点右侧的连接点**
2. **搜索"Webhook Response"**
3. **选择"Webhook Response"节点**
4. **配置节点**：
   - **Response Code**：200
   - **Response Body**：`{{ $json }}`（返回处理后的数据）

[截图位置：Webhook Response节点]

**注意**：Webhook Response需要配合Webhook Trigger使用。对于Schedule Trigger，我们可以使用其他输出方式。

#### 4.3 添加Code节点作为输出（替代方案）

由于Schedule Trigger不能直接使用Webhook Response，我们可以使用Code节点来输出结果：

1. **点击Set节点右侧的连接点**
2. **搜索"Code"**
3. **选择"Code"节点**
4. **配置节点**：
   - **Mode**：Run Once for All Items
   - **JavaScript Code**：
   ```javascript
   // 获取所有数据
   const items = $input.all();
   
   // 输出到控制台（在N8N执行日志中查看）
   console.log('Workflow executed successfully!');
   console.log('Data:', JSON.stringify(items, null, 2));
   
   // 返回数据
   return items;
   ```

5. **保存配置**

[截图位置：Code节点配置]

### 步骤5：保存和执行工作流

#### 5.1 保存工作流

1. **点击工具栏的"Save"按钮**（或按Ctrl+S / Cmd+S）
2. **工作流已保存**：左上角会显示"Saved"提示

#### 5.2 激活工作流

1. **点击工作流右上角的开关**：将工作流设置为"Active"
2. **工作流已激活**：开关变为绿色

**注意**：只有激活的工作流才会自动执行（如果使用Schedule Trigger）。

#### 5.3 手动执行工作流

1. **点击工具栏的"Execute Workflow"按钮**
2. **等待执行完成**：工作流会开始执行
3. **查看执行结果**：
   - 每个节点会显示执行状态（绿色表示成功）
   - 点击节点可以查看输入和输出数据

[截图位置：执行结果]

#### 5.4 查看执行历史

1. **点击左侧边栏的"Executions"**
2. **查看执行列表**：显示所有工作流的执行记录
3. **点击执行记录**：查看详细的执行日志
4. **分析执行过程**：
   - 查看每个节点的执行时间
   - 查看数据在每个节点的变化
   - 如果失败，查看错误信息

[截图位置：执行历史界面]

### 步骤6：理解数据流

理解数据如何在节点间流动非常重要。

#### 6.1 数据格式

N8N使用JSON格式传递数据：

```json
{
  "json": {
    "field1": "value1",
    "field2": "value2"
  },
  "binary": {},
  "error": null
}
```

#### 6.2 访问数据

在节点中，可以使用表达式访问数据：

- `{{ $json }}`：获取整个JSON对象
- `{{ $json.fieldName }}`：获取特定字段
- `{{ $json.array[0] }}`：获取数组元素
- `{{ $now }}`：获取当前时间
- `{{ $workflow.name }}`：获取工作流名称

#### 6.3 数据流追踪

1. **执行工作流**
2. **点击每个节点**：查看输入和输出数据
3. **对比数据变化**：观察数据在每个节点的变化
4. **绘制数据流图**：记录数据流经每个节点时的状态

## 实践练习

### 练习1：Hello World工作流

**任务目标**：创建一个完整的"Hello World"工作流，包含触发器、数据处理和输出

**前置条件**：
- N8N已安装并运行
- 能够访问N8N界面

**详细步骤**：

1. **创建新工作流**
   - 打开N8N
   - 点击"Add workflow"
   - 命名为"Hello World Workflow"

2. **添加Schedule Trigger**
   - 双击画布，搜索"Schedule Trigger"
   - 配置为"Every minute"（用于测试）

3. **添加HTTP Request节点**
   - 连接到Schedule Trigger
   - 配置URL：`https://api.github.com/zen`
   - 方法：GET

4. **添加Set节点**
   - 连接到HTTP Request
   - 添加字段：
     - `message`：`{{ $json }}`
     - `timestamp`：`{{ $now }}`
     - `greeting`：`"Hello from N8N!"`

5. **添加Code节点作为输出**
   - 连接到Set节点
   - 添加代码输出数据到控制台

6. **保存并执行**
   - 保存工作流
   - 点击"Execute Workflow"
   - 查看执行结果

**预期结果**：
- 工作流成功执行
- 每个节点显示绿色（成功状态）
- 可以在节点中查看数据

**验证方法**：
- 检查执行历史中有成功记录
- 点击每个节点查看数据是否正确
- 确认数据从触发器流向输出节点

**扩展挑战**：
- 使用天气API获取真实数据
- 添加Email节点发送结果
- 使用IF节点根据条件分流

**故障排除**：
- **问题**：HTTP Request失败
  - **解决**：检查URL是否正确，网络是否正常
- **问题**：节点连接失败
  - **解决**：确保从源节点的输出连接到目标节点的输入
- **问题**：表达式不工作
  - **解决**：检查表达式语法，使用`{{ }}`包裹

### 练习2：数据流追踪练习

**任务目标**：创建一个包含5个节点的工作流，追踪数据在每个节点的变化

**前置条件**：
- 完成练习1
- 理解基本的节点操作

**详细步骤**：

1. **创建工作流**
   - 命名为"Data Flow Tracking"
   - 添加Manual Trigger（手动触发器）

2. **添加节点链**
   - **节点1**：Manual Trigger
   - **节点2**：Set节点 - 添加初始数据
     - `name`：`"John"`
     - `age`：`30`
   - **节点3**：Set节点 - 修改数据
     - `age`：`{{ $json.age + 1 }}`
     - `status`：`"active"`
   - **节点4**：Set节点 - 添加计算字段
     - `birthYear`：`{{ $now.getFullYear() - $json.age }}`
   - **节点5**：Code节点 - 输出最终数据

3. **执行并追踪数据**
   - 执行工作流
   - 点击每个节点，记录输入和输出数据
   - 绘制数据流图

4. **创建数据流图**
   - 使用表格或图表记录数据变化
   - 标注每个节点的输入和输出

**预期结果**：
- 工作流包含5个节点
- 数据在每个节点正确流转
- 完成数据流追踪图

**验证方法**：
- 检查每个节点的数据是否正确
- 验证数据计算是否正确（如age+1）
- 确认数据流图准确反映数据变化

**数据流图示例**：

| 节点 | 输入数据 | 输出数据 | 说明 |
|------|---------|---------|------|
| Manual Trigger | - | `{}` | 触发工作流 |
| Set 1 | `{}` | `{name: "John", age: 30}` | 添加初始数据 |
| Set 2 | `{name: "John", age: 30}` | `{name: "John", age: 31, status: "active"}` | 修改age，添加status |
| Set 3 | `{name: "John", age: 31, status: "active"}` | `{name: "John", age: 31, status: "active", birthYear: 1993}` | 计算birthYear |
| Code | `{name: "John", age: 31, status: "active", birthYear: 1993}` | 输出到控制台 | 输出最终数据 |

**扩展挑战**：
- 添加IF节点进行条件判断
- 使用多个数据源合并数据
- 添加错误处理节点

**故障排除**：
- **问题**：数据丢失
  - **解决**：检查Set节点的"Keep Only Set Fields"选项
- **问题**：表达式计算错误
  - **解决**：检查表达式语法，确保数据类型正确

### 练习3：错误处理实践

**任务目标**：故意创建一个会失败的工作流，学习阅读错误信息并修复

**前置条件**：
- 完成练习1和2
- 理解基本的错误类型

**详细步骤**：

1. **创建会失败的工作流**
   - 命名为"Error Handling Practice"
   - 添加Manual Trigger
   - 添加HTTP Request节点，使用错误的URL：`https://invalid-url-12345.com`
   - 添加Set节点处理数据

2. **执行工作流**
   - 点击"Execute Workflow"
   - 观察执行结果

3. **分析错误信息**
   - 查看哪个节点失败（显示红色）
   - 点击失败节点查看错误详情
   - 阅读错误消息：
     - 错误类型（如网络错误、超时错误）
     - 错误原因
     - 错误位置

4. **修复错误**
   - 将URL改为有效的API地址
   - 重新执行工作流
   - 验证错误已修复

5. **创建错误处理机制**
   - 添加IF节点检查HTTP Request是否成功
   - 如果失败，输出错误信息
   - 如果成功，继续处理数据

**预期结果**：
- 能够识别错误节点
- 能够阅读和理解错误信息
- 能够修复错误
- 添加了错误处理机制

**验证方法**：
- 检查错误信息是否清晰
- 验证修复后工作流是否成功执行
- 确认错误处理机制是否工作

**常见错误类型**：

| 错误类型 | 原因 | 解决方法 |
|---------|------|---------|
| 网络错误 | URL无效或网络问题 | 检查URL，确保网络正常 |
| 超时错误 | 请求时间过长 | 增加超时时间或优化请求 |
| 认证错误 | API密钥无效 | 检查API密钥配置 |
| 数据格式错误 | 数据格式不匹配 | 检查数据格式，使用正确的解析方法 |

**扩展挑战**：
- 添加重试机制
- 使用Error Trigger捕获错误
- 创建错误通知系统

**故障排除**：
- **问题**：错误信息不清晰
  - **解决**：查看执行日志的详细错误信息
- **问题**：不知道如何修复
  - **解决**：搜索错误消息，查看N8N文档或社区

### 练习4：工作流优化

**任务目标**：对同一个任务创建3种不同的实现方式，对比性能并选择最优方案

**前置条件**：
- 完成前面的练习
- 理解工作流的基本概念

**详细步骤**：

1. **定义任务**
   - 任务：从API获取数据，处理数据，输出结果
   - 使用API：`https://jsonplaceholder.typicode.com/posts/1`

2. **实现方式1：串行处理**
   - Manual Trigger → HTTP Request → Set → Code
   - 所有节点串行执行

3. **实现方式2：并行处理**（如果适用）
   - Manual Trigger → 多个HTTP Request（并行）→ Merge → Code
   - 多个请求并行执行

4. **实现方式3：简化处理**
   - Manual Trigger → HTTP Request → Code（在Code中处理所有逻辑）
   - 减少节点数量

5. **对比执行**
   - 执行每个工作流
   - 记录执行时间
   - 记录资源消耗（节点数量、复杂度）

6. **分析结果**
   - 对比执行时间
   - 对比节点数量
   - 对比可维护性
   - 选择最优方案

**预期结果**：
- 创建3种不同的实现方式
- 完成性能对比
- 选择最优方案并说明理由

**验证方法**：
- 检查3种方式都能完成任务
- 验证性能数据是否准确
- 确认选择理由是否合理

**对比表格示例**：

| 实现方式 | 节点数量 | 执行时间 | 可维护性 | 适用场景 |
|---------|---------|---------|---------|---------|
| 串行处理 | 4个节点 | 2秒 | 高 | 简单任务 |
| 并行处理 | 5个节点 | 1秒 | 中 | 需要并行处理 |
| 简化处理 | 3个节点 | 1.5秒 | 低 | 快速原型 |

**扩展挑战**：
- 测试不同数据量下的性能
- 添加缓存机制优化性能
- 使用工作流模板提高复用性

**故障排除**：
- **问题**：性能差异不明显
  - **解决**：使用更大的数据集或更复杂的处理逻辑
- **问题**：不知道如何优化
  - **解决**：查看N8N性能优化文档，学习最佳实践

## 常见问题

**Q1：如何添加节点？**

A：有几种方式：
1. 双击画布空白处，搜索节点名称
2. 点击画布上的"+"按钮
3. 从源节点拖拽连接线，选择目标节点

**Q2：节点之间的连接有什么规则？**

A：
- 数据只能从上游节点流向下游节点
- 一个节点可以有多个输出连接（数据分流）
- 一个节点可以有多个输入连接（数据合并）
- 不能形成循环连接（节点A→节点B→节点A）

**Q3：如何测试单个节点？**

A：
1. 点击"Test workflow"按钮
2. 选择要测试的节点
3. 点击节点下方的"Test step"
4. 查看测试结果

**Q4：工作流执行失败怎么办？**

A：
1. 查看执行历史，找到失败的执行记录
2. 点击失败的节点，查看错误信息
3. 根据错误信息修复问题
4. 重新执行工作流

**Q5：如何查看节点的输入和输出数据？**

A：
1. 执行工作流后
2. 点击节点
3. 在节点下方或右侧面板查看数据
4. 可以展开JSON查看详细数据

**Q6：表达式`{{ $json }}`是什么意思？**

A：这是N8N的表达式语法：
- `{{ }}`：表达式包裹符
- `$json`：当前节点的JSON数据
- `$json.fieldName`：获取特定字段
- `$now`：当前时间

**Q7：如何让工作流自动执行？**

A：
1. 使用触发器节点（如Schedule Trigger）
2. 激活工作流（点击右上角的开关）
3. 工作流会在触发器条件满足时自动执行

**Q8：可以同时执行多个工作流吗？**

A：可以，N8N支持同时执行多个工作流。每个工作流独立执行，互不影响。

**Q9：如何复制节点？**

A：
1. 选择节点
2. 按Ctrl+C（Windows）或Cmd+C（Mac）复制
3. 按Ctrl+V（Windows）或Cmd+V（Mac）粘贴
4. 或右键点击节点，选择"Duplicate"

**Q10：如何删除节点？**

A：
1. 选择节点
2. 按Delete键
3. 或右键点击节点，选择"Delete"
4. 确认删除

## 知识检查

### 选择题

1. **工作流的基本结构是什么？**
   - A. 触发器 → 输出
   - B. 触发器 → 处理 → 输出
   - C. 处理 → 输出
   - D. 只有触发器
   - **答案**：B
   - **解释**：一个完整的工作流通常包含触发器、处理节点和输出节点。

2. **如何添加节点？**
   - A. 只能从菜单添加
   - B. 双击画布空白处
   - C. 右键点击画布
   - D. 以上都可以
   - **答案**：D
   - **解释**：有多种方式可以添加节点，包括双击画布、点击"+"按钮等。

3. **表达式`{{ $json.fieldName }}`的作用是什么？**
   - A. 获取整个JSON对象
   - B. 获取特定字段
   - C. 设置字段值
   - D. 删除字段
   - **答案**：B
   - **解释**：`{{ $json.fieldName }}`用于获取JSON中的特定字段。

4. **如何测试工作流？**
   - A. 只能执行整个工作流
   - B. 只能测试单个节点
   - C. 可以测试整个工作流或单个节点
   - D. 无法测试
   - **答案**：C
   - **解释**：N8N支持测试整个工作流或单个节点。

5. **工作流执行失败时，如何查看错误信息？**
   - A. 只能查看执行历史
   - B. 点击失败的节点查看错误
   - C. 无法查看错误
   - D. 只能重新执行
   - **答案**：B
   - **解释**：点击失败的节点可以查看详细的错误信息。

### 简答题

1. **请描述工作流的基本结构，并说明每个部分的作用。**

   **答案示例**：
   - **触发器**：工作流的起点，决定何时启动工作流，提供初始数据
   - **处理节点**：工作流的核心，执行实际工作，处理数据
   - **输出节点**：工作流的终点，将结果输出到外部系统或保存数据
   - 结构：触发器 → 处理节点1 → 处理节点2 → ... → 输出节点

2. **如何添加和连接节点？请详细说明步骤。**

   **答案示例**：
   - **添加节点**：
     1. 双击画布空白处或点击"+"按钮
     2. 搜索节点名称
     3. 选择节点
     4. 节点出现在画布上
   - **连接节点**：
     1. 将鼠标放在源节点的右侧连接点上
     2. 拖拽到目标节点的左侧连接点
     3. 连接完成

3. **什么是表达式？请给出3个常用的表达式示例。**

   **答案示例**：
   表达式是N8N中用于访问和操作数据的语法，使用`{{ }}`包裹。
   - `{{ $json }}`：获取整个JSON对象
   - `{{ $json.fieldName }}`：获取特定字段
   - `{{ $now }}`：获取当前时间

4. **如何测试和执行工作流？有什么区别？**

   **答案示例**：
   - **测试工作流**：
     - 点击"Test workflow"按钮
     - 可以选择测试整个工作流或单个节点
     - 用于验证配置是否正确
   - **执行工作流**：
     - 点击"Execute Workflow"按钮或激活工作流
     - 正式执行工作流
     - 会记录到执行历史
   - **区别**：测试用于验证，执行是正式运行

5. **如果工作流执行失败，应该如何排查和修复？**

   **答案示例**：
   1. 查看执行历史，找到失败的执行记录
   2. 点击失败的节点，查看错误信息
   3. 分析错误原因（网络错误、配置错误等）
   4. 修复问题（更正URL、修复配置等）
   5. 重新执行工作流验证修复

### 实践题

1. **创建你的第一个工作流**
   - 创建一个包含至少4个节点的工作流
   - 使用Schedule Trigger作为触发器
   - 添加HTTP Request节点获取数据
   - 添加Set节点处理数据
   - 添加输出节点
   - 执行并验证工作流

2. **追踪数据流**
   - 创建一个包含5个节点的工作流
   - 执行工作流
   - 记录数据在每个节点的变化
   - 绘制数据流图

3. **错误处理和优化**
   - 创建一个会失败的工作流
   - 分析错误信息
   - 修复错误
   - 优化工作流性能

## 延伸阅读

### 官方资源

1. **N8N工作流文档**
   - 网址：https://docs.n8n.io/workflows/
   - 内容：工作流创建和管理指南

2. **N8N节点参考**
   - 网址：https://docs.n8n.io/integrations/
   - 内容：所有节点的详细文档

3. **N8N表达式文档**
   - 网址：https://docs.n8n.io/code/expressions/
   - 内容：表达式语法和函数参考

### 学习资源

1. **N8N工作流模板**
   - 网址：https://n8n.io/workflows
   - 内容：大量现成的工作流模板，可以学习和参考

2. **N8N YouTube教程**
   - 搜索"N8N tutorial"、"N8N workflow"
   - 观看视频教程学习实际操作

3. **N8N社区论坛**
   - 网址：https://community.n8n.io
   - 内容：用户分享的工作流和问题解答

### 相关工具和概念

1. **JSON数据格式**
   - 了解JSON的基本结构
   - 学习如何访问和操作JSON数据
   - 这将帮助你更好地使用N8N

2. **API基础知识**
   - 了解REST API的概念
   - 学习HTTP方法（GET、POST等）
   - 理解API请求和响应

3. **工作流设计模式**
   - 学习常见的工作流设计模式
   - 了解如何优化工作流性能
   - 掌握错误处理最佳实践

### 下一步学习

完成本章学习后，建议你：

1. **完成所有实践练习**
   - 确保你能够独立创建包含多个节点的工作流
   - 理解数据流和节点连接
   - 掌握测试和执行工作流的方法

2. **探索更多节点**
   - 浏览N8N的节点库
   - 尝试使用不同的节点
   - 了解各种节点的功能

3. **创建实际的工作流**
   - 基于你的实际需求创建工作流
   - 解决真实的问题
   - 积累实践经验

4. **开始第四章学习**
   - 下一章将教你如何连接和使用第三方服务
   - 学习如何集成Gmail、Slack等常用服务
   - 准备好创建更强大的工作流

---

## 快速参考

### 工作流基本结构

```
[触发器] → [处理节点1] → [处理节点2] → ... → [输出节点]
```

### 常用节点类型

| 节点类型 | 用途 | 示例 |
|---------|------|------|
| Schedule Trigger | 定时触发 | 每天9点执行 |
| Manual Trigger | 手动触发 | 点击按钮执行 |
| HTTP Request | 调用API | 获取天气数据 |
| Set | 设置数据 | 添加或修改字段 |
| Code | 执行代码 | 自定义处理逻辑 |
| IF | 条件判断 | 根据条件分流 |
| Email | 发送邮件 | 发送通知 |

### 常用表达式

| 表达式 | 说明 | 示例 |
|--------|------|------|
| `{{ $json }}` | 获取整个JSON对象 | - |
| `{{ $json.fieldName }}` | 获取特定字段 | `{{ $json.name }}` |
| `{{ $now }}` | 获取当前时间 | - |
| `{{ $workflow.name }}` | 获取工作流名称 | - |
| `{{ $json.array[0] }}` | 获取数组元素 | - |

### 工作流操作快捷键

| 操作 | Windows | macOS |
|------|---------|-------|
| 保存 | Ctrl+S | Cmd+S |
| 复制节点 | Ctrl+C | Cmd+C |
| 粘贴节点 | Ctrl+V | Cmd+V |
| 删除节点 | Delete | Delete |
| 撤销 | Ctrl+Z | Cmd+Z |
| 重做 | Ctrl+Y | Cmd+Y |

---

**恭喜你完成第三章的学习！现在你已经能够创建自己的第一个工作流了。准备好学习如何连接第三方服务，创建更强大的自动化流程了吗？** 🚀

